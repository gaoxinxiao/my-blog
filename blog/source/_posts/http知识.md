---
title: HTTP网络协议
date: 2019-11-29 13:51:08
tags:
---

最近学习了一下HTTP相关的知识，做个总结！

![](http://image.gxx365.com/http.jpeg)
<!-- more -->

## HTTP简单介绍
1、HTTP是超文本传输协议是一个基于tcp/ip协议来传输数据的（html文件、图片等）
2、tcp是一种面向连接的，基于字节流的传输层通信协议
3、ip就是网络直接互联的协议，也就是我们常说的ip地址
4、HTTP报文结构分为两种请求报文、响应报文
5、HTTP1.0到HTTP1.1的区别就是1.1版本增加了永久性的连接
6、HTTP2.0增加了三个新特性多路由复用、头部压缩、服务端推送
7、HTTP默认端口是80

## Tcp通信方式

> 单工通信： 单工通信建立好之后永远只能是客户端给服务端发送包或者服务端给客户端发送包，不可能客户端发送给服务端，服务端又发送到客户端就像是一条单向通道 只能永远是一方在走
半双工通信： 同时的情况下只能有一方在发送包一方在接收包比如客户端发送之后服务端接收到，在从服务端发送到客户端不可能同时发送
全双工通信： 是一种比较自由的方式通信，在客户端向服务端发送包的同时，服务端也能向客户端发送可以是一种自由式交叉发送 

## HTTP工作原理

> HTTP协议定义Web客户端如何从Web服务器请求Web页面，以及服务器如何把Web页面传送给客户端。HTTP协议采用了请求/响应模型。客户端向服务器发送一个请求报文，请求报文包含请求的方法、URL、协议版本、请求头部和请求数据。服务器以一个状态行作为响应，响应的内容包括协议的版本、成功或者错误代码、服务器信息、响应头部和响应数据。

## HTTP常见的状态码

200 请求已成功，请求所希望的响应头或数据体将随此响应返回。出现此状态码是表示正常状态。

301 重定向资源到别的位置 

304 发送一个请求之后如果下一次在请求有缓存的时候直接取缓存会返回304 

400 客户端发送到服务器的数据有误 一般都是客户端的错误

403 就是常说的跨域请求

404 请求路径有错误查看路径

500 服务器响应错误

502 客户端请求服务器网络超时

504 大多数情况是 服务器正在重启或者已经挂了。。。。。

## HTTP请求体和响应体信息

```python
#下面都是一些经常用的参数
Content-Type: text/html、application/json、text/plain  #服务端发送的类型及采用的编码方式，不统一的话后端接收不到客户端的传参
    
Connection: keep-alive、close                          #维护客户端和服务端的连接关系 

accept:*/*                                             #客户端）希望接受的数据类

Access-Control-Allow-Origin:                           #响应头制定了该响应的资源是或否被允许给定的origin共享

Accept-Encoding: gzip、 deflate                         #客户端接收编码类型，一些网络压缩格式： gzip, deflate

Accept-Language: zh-CN,zh;q=0.9                         #客户端接收的语言类型 、中文
```

## 说起HTTP就能想起和他相关的HTTPS说一下两者区别

1.https需要配置证书大多数证书都是需要付费的
2.http是超文本传输协议，也就是明文传输安全性的话来讲是没有https高的，https是具有安全性的ssl加密传输协议
3.http和https用的默认端口也不一样，http用的默认是80端口，https是443端口
4.HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，要比http协议安全

## HTTP是怎么让客户端和服务端连接起来的（三次握手）

tcp三次握手，所谓三次握手就是建立一个tcp连接的一个过程，这个过程中客户端和服务器总共发送三个包

>- 这里引用阮一峰老师博客的一张图

![](http://www.ruanyifeng.com/blogimg/asset/2014/bg2014092002.png)

> 1.第一次握手由客户端向服务器发送一个SYN包（SYN==同步序列编号），并进入发送状态等服务器确认
2.第二次服务器收到客户端发送的SYN包，必须确认客户的SYN，然后同时自己也发送一个SYN包，此时服务器进入SYN_RECV状态（RECV==接收）
3.第三次客户端收到服务器发送包SYN包，向服务器发送一个确认包（ACK），此包发送完毕客户端和服务器进入ESTABLISHED（ESTABLISHED == 建立）状态，完成三次握手 
 

## 附赠一道经典面试题浏览器输入URL到页面展示都经历了什么

1.第一步DNS解析URL，DNS解析的过程就是寻找哪个服务器上有请求的资源。因为ip地址不容易记忆，一般会使用URL域名作为网址。DNS解析就是将域名翻译成IP地址的过程
2.浏览器利用tcp协议通过三次握手与服务器建立连接，浏览器根据解析到的IP地址和端口号发起http请求，服务器接收到http请求之后，开始搜索html页面，并使用http返回响应报文，浏览器接收到返回的html页面之后，开始进行页面的渲染
3.浏览器根据深度遍历的方式把html节点遍历成dom树,将css解析成CSSDOM树,将dom树和CSSDOM树构造成render树,JS根据得到的render树 计算所有节点在屏幕中的位置，进行布局（回流）,遍历render树并调用硬件API绘制所有节点（重绘），最后生成渲染数渲染页面


### 以上的回答是简单的方式，这个问题要是往细节深挖的话会有很多知识点 


> 未完待续。。。。。。。。。。。